### Pinctrl
#### 意义
![20230412144208.png](pic%2F20230412144208.png)  
看下面2类问题  
##### 引脚（复用、初始电平)
现在芯片的引脚大多数都有复用能力，引脚在使用之前先通过配置IOMUX来选择其功能  
如上图，PIN_A和PIN_B可以配置成GPIO功能，也可以配置成I2C功能  
若配置成GPIO，还需要配置他的初始电平

##### 引脚配置过程
配置引脚需要查看芯片手册来找到每个引脚对应的寄存器，写入所需的值  
现在的芯片有成百上千的引脚，用户对芯片不熟悉，若每个都由用户去配置，那是非常低效的 

##### Pinctrl子系统
芯片厂商对于自家芯片是再熟悉不过了，他们把**配置引脚具体的寄存器操作封装到Pinctrl子系统中**  
做这个工作的人被称为BSP工程师，我们只需要去设备树中配置Pinctrl即可  
<br>

#### PinController 与 ClientDevice
![20230412151230.png](pic%2F20230412151230.png)  
*图中详细说明，见开发手册15.1.2*  

这2个玩意儿不是模块的概念，而是在设备树中的层级概念  
分为2层  
* PinController在最底层，定义引脚与初始电平
* ClientDevice在上层定义设备节点，使用PinController中定义的节点  
*（上图中的节点字段，没有统一标准，每家芯片厂商都不一样，但是一定会划分这样的层级）*
